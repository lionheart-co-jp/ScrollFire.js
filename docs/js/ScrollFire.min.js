(function(i,t){typeof exports=="object"&&typeof module<"u"?module.exports=t():typeof define=="function"&&define.amd?define(t):(i=typeof globalThis<"u"?globalThis:i||self,i.ScrollFire=t())})(this,function(){"use strict";var v=Object.defineProperty;var T=(i,t,r)=>t in i?v(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r;var a=(i,t,r)=>(T(i,typeof t!="symbol"?t+"":t,r),r);const i="";function t(l){return l.each!==void 0}function r(l){return l.length!==void 0}const p={root:null,ratio:50,debugThresholdView:!1};class f{constructor(){a(this,"trigger",[]);a(this,"_flag",!1)}start(){return this._flag?this:(this._flag=!0,this.observe(),this)}stop(){return this._flag?(this._flag=!1,this.unobserve(),this):this}addTrigger(e,s,d,g={}){const h=t(e),u={...p,...g},b={threshold:[0,.5,1],root:u.root,rootMargin:`0px 0px -${100-u.ratio}% 0px`},m=new IntersectionObserver(o=>{const c=this.getThresholdTop(u.ratio);o.map(n=>{n.isIntersecting||n.boundingClientRect.bottom<=c?s&&s(h?jQuery(n.target):n.target):!n.isIntersecting&&n.boundingClientRect.bottom>c&&d&&d(h?jQuery(n.target):n.target)})},b);if(this.trigger.push({target:e,observer:m}),u.debugThresholdView){const o=document.createElement("span");o.style.display="block",o.style.position="fixed",o.style.left="0",o.style.right="0",o.style.top=`${u.ratio}%`,o.style.borderTop="1px dashed rgba(255, 0, 0, 0.5)",o.style.pointerEvents="none",document.body.appendChild(o)}return this}observe(){this.trigger.map(({target:e,observer:s})=>{t(e)?e.each(function(){s.observe(this)}):r(e)?e.forEach(d=>{s.observe(d)}):s.observe(e)})}unobserve(){this.trigger.map(({target:e,observer:s})=>{t(e)?e.each(function(){s.unobserve(this)}):r(e)?e.forEach(d=>{s.unobserve(d)}):s.unobserve(e)})}getThresholdTop(e){return window.innerHeight*(e/100)}}return window.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("[data-scroll-fire]").forEach(l=>{new f().addTrigger(l,e=>t(e)?e.attr("data-scroll-fire-animate","active"):e.dataset.scrollFireAnimate="active",e=>t(e)?e.removeAttr("data-scroll-fire-animate"):delete e.dataset.scrollFireAnimate).start()})}),f});
